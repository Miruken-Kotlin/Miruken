apply from: "${rootDir}/gradle/kotlin.gradle"

apply plugin: 'com.jfrog.bintray'

configurations {
    testClasses {
        extendsFrom(testRuntime)
    }
}

task testJar(type: Jar) {
    classifier = 'test'
    from sourceSets.test.output
}

artifacts {
    testClasses testJar
}

bintray {
    user = System.getenv('BINTRAY_USER')
    key  = System.getenv('BINTRAY_KEY')
    configurations = ['archives']
    publish = true
    pkg {
        repo = 'Miruken-Kotlin'
        name = 'miruken'
        userOrg = 'miruken'
        licenses = ['MIT']
        vcsUrl = 'https://github.com/Miruken-Kotlin/Miruken.git'
        version {
            desc = 'Miruken Core Kotlin Implementation'
            released = new Date()
        }
    }
}
